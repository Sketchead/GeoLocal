"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[851],{851:(T,p,i)=>{i.r(p),i.d(p,{CreatePostPageModule:()=>y});var m=i(9808),a=i(4182),r=i(7590),u=i(7733),d=i(655),g=i(6388),P=i(6090),C=i(4814),t=i(2096),f=i(2468),v=i(7323),x=i(7556);const b=[{path:"",component:(()=>{class e{constructor(n,o,s,l,O,Z){this.dataservice=n,this.router=o,this.loadingController=s,this.auth=l,this.a=O,this.alertController=Z,this.pos=[1,2],(()=>{(0,d.mG)(this,void 0,void 0,function*(){const h=yield P.b.getCurrentPosition();this.pos[0]=h.coords.latitude,this.pos[1]=h.coords.longitude,console.log("Lat:",this.pos[0]),console.log("Lon:",this.pos[1])})})(),(0,C.q)(window)}ngOnInit(){}addPost(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.loadingController.create();yield n.present(),this.post={author:this.auth.currentUser.uid,title:this.title,text:this.text,positive:this.positive,pos:this.pos,type:"post"};const o=yield this.dataservice.addPostGetId(this.post);yield n.dismiss(),this.editPostAddPhoto(o)})}choosePhoto(){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Cargar foto desde",buttons:[{text:"Galer\xeda",role:"gallery",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){const o=yield g.V1.getPhoto({quality:90,allowEditing:!1,resultType:g.dk.Base64,source:g.oK.Photos});console.log(o),this.b64imx=o})},{text:"C\xe1mara",role:"camera",handler:()=>(0,d.mG)(this,void 0,void 0,function*(){const o=yield g.V1.getPhoto({quality:90,allowEditing:!1,resultType:g.dk.Base64,source:g.oK.Camera});console.log(o),this.b64imx=o})}]})).present()})}editPostAddPhoto(n){return(0,d.mG)(this,void 0,void 0,function*(){if(this.b64imx){const o=yield this.loadingController.create();yield o.present();const s=yield this.dataservice.uploadPhotoWId(this.b64imx,n);o.dismiss(),s||(yield(yield this.alertController.create({header:"Acci\xf3n fallida",message:"Hubo un problema al subir tu foto",buttons:["OK"]})).present())}this.router.navigateByUrl("/app/home",{replaceUrl:!0})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.D),t.Y36(u.F0),t.Y36(r.HT),t.Y36(v.gx),t.Y36(x.e),t.Y36(r.Br))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-post"]],decls:33,vars:5,consts:[["id","container"],[1,"header"],["routerLink",".."],["id","logo"],["src","/assets/images/Logo.png"],["ngNativeValidate","",3,"ngSubmit"],[1,"formulario"],[1,"campo"],["type","text","id","title","name","title","required","",3,"ngModel","ngModelChange"],["name","text","rows","10","cols","30","required","",1,"textarea",3,"ngModel","ngModelChange"],["id","positive","name","positive","required","","placeholder","ola",3,"ngModel","ngModelChange"],[3,"ngValue"],["id","btnEligeFoto","color","warning","fill","solid","shape","round","expand","full","type","submit",1,"ion-float-right",3,"click"],["name","images-outline"],["id","botonRegistro","type","submit"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),t._UZ(3,"ion-back-button",2),t.TgZ(4,"ion-title"),t._uU(5,"Crear Publicaci\xf3n"),t.qZA()(),t.TgZ(6,"div",3),t._UZ(7,"ion-img",4),t.qZA(),t.TgZ(8,"form",5),t.NdJ("ngSubmit",function(){return o.addPost()}),t.TgZ(9,"div",6)(10,"div",7)(11,"label"),t._uU(12,"T\xcdTULO"),t.qZA(),t.TgZ(13,"input",8),t.NdJ("ngModelChange",function(l){return o.title=l}),t.qZA()(),t.TgZ(14,"div",7)(15,"label"),t._uU(16,"RESE\xd1A"),t.qZA(),t.TgZ(17,"textarea",9),t.NdJ("ngModelChange",function(l){return o.text=l}),t.qZA()(),t.TgZ(18,"div",7)(19,"label"),t._uU(20,"VALORACI\xd3N"),t.qZA(),t.TgZ(21,"select",10),t.NdJ("ngModelChange",function(l){return o.positive=l}),t.TgZ(22,"option",11),t._uU(23,"Positiva"),t.qZA(),t.TgZ(24,"option",11),t._uU(25,"Negativa"),t.qZA()()(),t.TgZ(26,"form")(27,"div",7)(28,"ion-button",12),t.NdJ("click",function(){return o.choosePhoto()}),t._UZ(29,"ion-icon",13),t._uU(30,"Elegir foto"),t.qZA()()(),t.TgZ(31,"button",14),t._uU(32,"PUBLICAR"),t.qZA()()()()()),2&n&&(t.xp6(13),t.Q6J("ngModel",o.title),t.xp6(4),t.Q6J("ngModel",o.text),t.xp6(4),t.Q6J("ngModel",o.positive),t.xp6(1),t.Q6J("ngValue",!0),t.xp6(2),t.Q6J("ngValue",!1))},dependencies:[a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F,r.oU,r.YG,r.W2,r.gu,r.Xz,r.wd,r.cs,r.YI,u.rH],styles:['#container[_ngcontent-%COMP%]{text-align:center;position:relative;height:100vh}#container[_ngcontent-%COMP%]:before{content:"";background:url(/assets/images/fondoInicio.jpg);height:100%;background-position:center;background-repeat:no-repeat;background-size:cover;opacity:.3;position:absolute;inset:0;z-index:-1}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#logo[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:60%}.formulario[_ngcontent-%COMP%]{display:block;position:relative}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;margin:5px;color:#ea7622;font-weight:700;font-size:15px}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;border:none;font-size:15px;border-bottom:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;font-size:15px;border:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}.formulario[_ngcontent-%COMP%]   #positive[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;border:none;font-size:15px;border-bottom:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}.formulario[_ngcontent-%COMP%]   #positive[_ngcontent-%COMP%]::placeholder{color:#ea7622;font-weight:700;font-size:15px}#botonRegistro[_ngcontent-%COMP%]{margin:15px;width:80%;border-radius:20px;font-size:25x;color:#000;background-color:#fff;border:1px solid #EA7622;font-weight:bolder;padding-top:7px;padding-bottom:7px}#btnEligeFoto[_ngcontent-%COMP%]{margin-right:8em}ion-back-button[_ngcontent-%COMP%]{display:inline-block;width:10%}ion-title[_ngcontent-%COMP%]{text-align:start;display:inline-block;width:80%}']}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(b),u.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,a.u5,r.Pc,M]}),e})()}}]);