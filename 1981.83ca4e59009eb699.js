"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1981],{76:(x,P,i)=>{i.d(P,{GW:()=>o,dk:()=>r,oK:()=>c});var c=(()=>{return(u=c||(c={})).Prompt="PROMPT",u.Camera="CAMERA",u.Photos="PHOTOS",c;var u})(),o=(()=>{return(u=o||(o={})).Rear="REAR",u.Front="FRONT",o;var u})(),r=(()=>{return(u=r||(r={})).Uri="uri",u.Base64="base64",u.DataUrl="dataUrl",r;var u})()},6388:(x,P,i)=>{i.d(P,{V1:()=>r,dk:()=>o.dk,oK:()=>o.oK});var c=i(7423),o=i(76);const r=(0,c.fo)("Camera",{web:()=>i.e(3954).then(i.bind(i,3954)).then(u=>new u.CameraWeb)})},1981:(x,P,i)=>{i.r(P),i.d(P,{EditPostPageModule:()=>y});var c=i(9808),o=i(4182),r=i(7590),u=i(7733),p=i(655),v=i(6388),M=i(3562),t=i(2096),_=i(2468),E=i(7323),n=i(7556);function e(d,m){if(1&d){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"select",17),t.NdJ("ngModelChange",function(h){t.CHM(a);const C=t.oxw();return t.KtG(C.positive=h)}),t.TgZ(3,"option",18),t._uU(4,"Positiva"),t.qZA(),t.TgZ(5,"option",18),t._uU(6,"Negativa"),t.qZA()(),t._UZ(7,"br")(8,"br"),t.qZA(),t.BQk()}if(2&d){const a=t.oxw();t.xp6(2),t.Q6J("ngModel",a.positive),t.xp6(1),t.Q6J("ngValue",!0),t.xp6(2),t.Q6J("ngValue",!1)}}function s(d,m){if(1&d&&(t.ynx(0),t.TgZ(1,"ion-slide"),t._UZ(2,"img",19),t.qZA(),t.BQk()),2&d){const a=m.$implicit;t.xp6(2),t.s9C("src",a,t.LSH)}}const f=[{path:"",component:(()=>{class d{constructor(a,g,h,C,U,b,T,D){this.dataservice=a,this.router=g,this.loadingController=h,this.auth=C,this.a=U,this.alertController=b,this.firestore=T,this.route=D,this.post={title:"a",text:"e",positive:!0,type:""}}ngOnInit(){this.route.queryParams.subscribe(a=>(0,p.mG)(this,void 0,void 0,function*(){const g=(0,M.JU)(this.firestore,`posts/${a.id}`);yield(0,M.QT)(g).then(h=>(0,p.mG)(this,void 0,void 0,function*(){this.post.id=a.id,this.title=this.post.title=yield h.data().title,this.images=this.post.images=yield h.data().images,this.text=this.post.text=yield h.data().text,this.post.author=yield h.data().author,this.positive=this.post.positive=yield h.data().positive,this.pos=this.post.pos=yield h.data().pos,this.type=this.post.type=yield h.data().type}))}))}addPost(){return(0,p.mG)(this,void 0,void 0,function*(){const a=yield this.loadingController.create();yield a.present(),this.post2={id:this.post.id,author:this.auth.currentUser.uid,title:this.title,text:this.text,positive:this.positive,type:"post"},this.dataservice.updatePost(this.post2),yield a.dismiss(),this.editPostAddPhoto(this.post2.id)})}deletepost(a,g){return(0,p.mG)(this,void 0,void 0,function*(){if(g){const h=yield this.loadingController.create();yield h.present(),yield this.dataservice.updatePost(a),yield h.dismiss(),yield this.router.navigateByUrl("/app/home",{replaceUrl:!0}),this.Done("Eliminado exitoso","La publicacion se ha eliminado con exito")}})}deleteConfirmation(a){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"\xbfEstas seguro?",message:"Una vez eliminado, no se podra recuperar",cssClass:"custom-alert",buttons:[{text:"No",handler:()=>this.deletepost(a,!1)},{text:"Si",handler:()=>this.deletepost(a,!0)}]})).present()})}Done(a,g){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:a,message:g,buttons:["OK"]})).present()})}choosePhoto(){return(0,p.mG)(this,void 0,void 0,function*(){const a=yield v.V1.getPhoto({quality:90,allowEditing:!1,resultType:v.dk.Base64,source:v.oK.Photos});console.log(a),this.b64imx=a})}editPostAddPhoto(a){return(0,p.mG)(this,void 0,void 0,function*(){if(this.b64imx){const g=yield this.loadingController.create();yield g.present();const h=yield this.dataservice.uploadPhotoWId(this.b64imx,a);g.dismiss(),h||(yield(yield this.alertController.create({header:"Acci\xf3n fallida",message:"Hubo un problema al subir tu foto",buttons:["OK"]})).present())}this.router.navigateByUrl("/app/home",{replaceUrl:!0})})}}return d.\u0275fac=function(a){return new(a||d)(t.Y36(_.D),t.Y36(u.F0),t.Y36(r.HT),t.Y36(E.gx),t.Y36(n.e),t.Y36(r.Br),t.Y36(M.gg),t.Y36(u.gz))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-edit-post"]],decls:30,vars:7,consts:[[3,"fullscreen"],["collapse","condense"],["id","container"],[1,"header"],["id","logo"],["src","/assets/images/Logo.png"],["ngNativeValidate","",3,"ngSubmit"],[1,"formulario"],[1,"campo"],["type","text","id","title","name","title","required","",3,"ngModel","value","ngModelChange"],["type","text","id","text","name","text","required","",3,"ngModel","value","ngModelChange"],[4,"ngIf"],["pager","true","loop","true",1,"img-slide"],[4,"ngFor","ngForOf"],["id","btnEligeFoto","color","warning","fill","solid","shape","round","expand","full","type","submit",1,"ion-float-right",3,"click"],["name","images-outline"],["id","botonRegistro","type","submit"],["id","positive","name","positive","required","",3,"ngModel","ngModelChange"],[3,"ngValue"],["height","200","width","200",3,"src"]],template:function(a,g){1&a&&(t.TgZ(0,"ion-content",0),t._UZ(1,"ion-header",1),t.TgZ(2,"div",2)(3,"div",3),t._UZ(4,"ion-back-button"),t.TgZ(5,"ion-title"),t._uU(6,"Editar Publicaci\xf3n"),t.qZA()(),t.TgZ(7,"div",4),t._UZ(8,"ion-img",5),t.qZA(),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return g.addPost()}),t.TgZ(10,"div",7)(11,"div",8)(12,"label"),t._uU(13,"T\xcdTULO"),t.qZA(),t.TgZ(14,"input",9),t.NdJ("ngModelChange",function(C){return g.title=C}),t.qZA()(),t.TgZ(15,"div",8)(16,"label"),t._uU(17,"RESE\xd1A"),t.qZA(),t.TgZ(18,"input",10),t.NdJ("ngModelChange",function(C){return g.text=C}),t.qZA()(),t.YNc(19,e,9,3,"ng-container",11),t.TgZ(20,"div",8)(21,"ion-slides",12),t.YNc(22,s,3,1,"ng-container",13),t.qZA()(),t.TgZ(23,"form")(24,"div",8)(25,"ion-button",14),t.NdJ("click",function(){return g.choosePhoto()}),t._UZ(26,"ion-icon",15),t._uU(27,"Elegir foto"),t.qZA()()(),t.TgZ(28,"button",16),t._uU(29,"Editar"),t.qZA()()()()()),2&a&&(t.Q6J("fullscreen",!0),t.xp6(14),t.s9C("value",g.post.title),t.Q6J("ngModel",g.title),t.xp6(4),t.s9C("value",g.post.text),t.Q6J("ngModel",g.text),t.xp6(1),t.Q6J("ngIf","post"==g.post.type),t.xp6(3),t.Q6J("ngForOf",g.post.images))},dependencies:[c.sg,c.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.Q7,o.On,o.F,r.oU,r.YG,r.W2,r.Gu,r.gu,r.Xz,r.A$,r.Hr,r.wd,r.cs],styles:['#container[_ngcontent-%COMP%]{text-align:center;position:relative;height:100vh}#container[_ngcontent-%COMP%]:before{content:"";background:url(/assets/images/fondoInicio.jpg);height:100%;background-position:center;background-repeat:no-repeat;background-size:cover;opacity:.3;position:absolute;inset:0;z-index:-1}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#logo[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:60%}.formulario[_ngcontent-%COMP%]{display:block;position:relative}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;margin:5px;color:#ea7622;font-weight:700;font-size:15px}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;border:none;font-size:15px;border-bottom:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}.formulario[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{color:#ea7622;float:left;margin-left:8em}.formulario[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]::placeholder{color:#ea7622;font-weight:700;font-size:15px}#botonRegistro[_ngcontent-%COMP%]{margin:15px;width:80%;border-radius:20px;font-size:25x;color:#000;background-color:#fff;border:1px solid #EA7622;font-weight:bolder;padding-top:7px;padding-bottom:7px}#btnEligeFoto[_ngcontent-%COMP%]{margin-right:8em}.img-slide[_ngcontent-%COMP%]{height:200px;width:200px}ion-back-button[_ngcontent-%COMP%]{display:inline-block;width:10%}ion-title[_ngcontent-%COMP%]{text-align:start;display:inline-block;width:80%}.formulario[_ngcontent-%COMP%]   #positive[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;border:none;font-size:15px;border-bottom:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}']}),d})()}];let O=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[u.Bz.forChild(f),u.Bz]}),d})(),y=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[c.ez,o.u5,r.Pc,O]}),d})()},7556:(x,P,i)=>{i.d(P,{e:()=>_});var c=i(655),o=i(7323),r=i(8304),u=i(7311),p=i(2731),v=i(5070),M=i(3562),t=i(2096);let _=(()=>{class E{constructor(e,s){this.auth=e,this.firestore=s}register({email:e,password:s}){return(0,c.mG)(this,void 0,void 0,function*(){try{return yield(0,v.Xb)(this.auth,e,s)}catch(l){return null}})}googleregister(){return(0,c.mG)(this,void 0,void 0,function*(){try{const e=(0,o.v0)(),s=new r.hJ;yield(0,r.F6)(e,s)}catch(e){return null}})}facebookregister(){return(0,c.mG)(this,void 0,void 0,function*(){try{const e=(0,o.v0)(),s=new r._O;yield(0,r.F6)(e,s)}catch(e){return null}})}hasSetup(){return(0,c.mG)(this,void 0,void 0,function*(){const s=(0,o.v0)().currentUser.uid,l=(0,p.hJ)(this.firestore,"users");return(0,p.IO)((0,p.hJ)(l,"users"),(0,p.ar)("user","==",s))?(console.log("false"),()=>(0,u.Y_)(["/app/home"])):()=>(0,u.Y_)(["/user-type"])})}login({email:e,password:s}){return(0,c.mG)(this,void 0,void 0,function*(){try{return yield(0,o.e5)(this.auth,e,s)}catch(l){return console.log("error Login: "+l),l}})}googleLogin(){return(0,c.mG)(this,void 0,void 0,function*(){try{const e=(0,o.v0)(),s=new r.hJ;yield(0,r.F6)(e,s)}catch(e){return null}})}facebookLogin(){return(0,c.mG)(this,void 0,void 0,function*(){try{const e=(0,o.v0)(),s=new r._O;yield(0,r.F6)(e,s)}catch(e){return null}})}logout(){return(0,v.w7)(this.auth)}getUserType(e){return(0,c.mG)(this,void 0,void 0,function*(){const s=(0,M.JU)(this.firestore,`users/${e}`);let l=null;(0,M.QT)(s).then(f=>(console.log(f.data(),f.id),l=f.data(),l.type))})}}return E.\u0275fac=function(e){return new(e||E)(t.LFG(o.gx),t.LFG(M.gg))},E.\u0275prov=t.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},2468:(x,P,i)=>{i.d(P,{D:()=>t});var c=i(655),o=i(3562),r=i(6180),u=i(6961),p=i(5525),v=i(2096),M=i(7323);let t=(()=>{class _{constructor(n,e,s){this.firestore=n,this.auth=e,this.storage=s}getPosts(){const n=(0,o.hJ)(this.firestore,"posts");return(0,o.BS)(n,{idField:"id"})}getUsers(){const n=(0,o.hJ)(this.firestore,"posts");return(0,o.BS)(n,{idField:"id"})}getProfiles(){const n=(0,o.hJ)(this.firestore,"users");return(0,o.BS)(n,{idField:"user"})}getPostById(n){let e;const s=(0,o.JU)(this.firestore,`posts/${n}`);let l=(0,o._1)(s,{idField:"id"});return e.author=l.author,e.id=l.id,e.images=l.images,e.pos=l.pos,e.positive=l.positive,e.text=l.text,e.title=l.title,e}addPost(n){const e=(0,o.hJ)(this.firestore,"posts");return(0,o.ET)(e,n)}addPostGetId(n){const e=(0,o.hJ)(this.firestore,"posts");return(0,o.ET)(e,n).then(l=>(console.log(l.id),l.id))}deletePost(n){const e=(0,o.JU)(this.firestore,`posts/${n.id}`);return(0,o.oe)(e)}deleteImage(n){for(let s=0;s<n.images.length;s++)console.log(n.images[s])}updatePost(n){const e=(0,o.JU)(this.firestore,`posts/${n.id}`);return(0,o.r7)(e,{title:n.title,text:n.text,positive:n.positive})}uploadPhoto(n){return(0,c.mG)(this,void 0,void 0,function*(){let e;const O=(0,r.iH)(this.storage,`uploads/${this.auth.currentUser.uid}/photo.png`);try{yield(0,u.sf)(O,n.base64String,"base64"),e=[yield(0,u.Jt)(O)];const d=(0,o.JU)(this.firestore,"posts/bvSZeSKsuk6Ea95M6ytv");return yield(0,p.pl)(d,{images:e}),!0}catch(y){return console.log(y),null}})}uploadPhotoWId(n,e){return(0,c.mG)(this,void 0,void 0,function*(){let s;const f=e,y=(0,r.iH)(this.storage,`uploads/${this.auth.currentUser.uid}/${f}/photo.png`);try{yield(0,u.sf)(y,n.base64String,"base64"),s=[yield(0,u.Jt)(y)];const m=(0,o.JU)(this.firestore,`posts/${f}`);return yield(0,o.r7)(m,{images:s}),!0}catch(d){return console.log(d),null}})}getImagesArray(n){return(0,c.mG)(this,void 0,void 0,function*(){let e;const O=(0,r.iH)(this.storage,`uploads/${this.auth.currentUser.uid}/photo.png`);try{return yield(0,u.sf)(O,n.base64String,"base64"),e=[yield(0,u.Jt)(O)],e}catch(y){return console.log(y),null}})}getDoc(n){return(0,c.mG)(this,void 0,void 0,function*(){const e=(0,o.JU)(this.firestore,`posts/${n}`);let s=null;(0,o.QT)(e).then(l=>(console.log(l.data(),l.id),s=l.data(),s))})}}return _.\u0275fac=function(n){return new(n||_)(v.LFG(o.gg),v.LFG(M.gx),v.LFG(r.Ke))},_.\u0275prov=v.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);