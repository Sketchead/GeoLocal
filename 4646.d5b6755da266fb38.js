"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4646],{4646:(Z,p,i)=>{i.r(p),i.d(p,{CreatePublicityPostPageModule:()=>v});var h=i(9808),r=i(4182),a=i(7590),u=i(7733),s=i(655),d=i(6388),m=i(6090),C=i(4814),t=i(2096),f=i(2468),b=i(7323),y=i(7556);const x=[{path:"",component:(()=>{class o{constructor(n,e,l,g,O,T){this.dataservice=n,this.router=e,this.loadingController=l,this.auth=g,this.a=O,this.alertController=T,this.pos=[1,2],(()=>{(0,s.mG)(this,void 0,void 0,function*(){const P=yield m.b.getCurrentPosition();this.pos[0]=P.coords.latitude,this.pos[1]=P.coords.longitude,console.log("Lat:",this.pos[0]),console.log("Lon:",this.pos[1])})})(),(0,C.q)(window)}ngOnInit(){}addPost(){return(0,s.mG)(this,void 0,void 0,function*(){const n=yield this.loadingController.create();yield n.present(),this.post={author:this.auth.currentUser.uid,title:this.title,text:this.text,pos:this.pos,type:"publicity"};const e=yield this.dataservice.addPostGetId(this.post);yield n.dismiss(),this.editPostAddPhoto(e)})}choosePhoto(){return(0,s.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Cargar foto desde",buttons:[{text:"Galer\xeda",role:"gallery",handler:()=>(0,s.mG)(this,void 0,void 0,function*(){const e=yield d.V1.getPhoto({quality:90,allowEditing:!1,resultType:d.dk.Base64,source:d.oK.Photos});console.log(e),this.b64imx=e})},{text:"C\xe1mara",role:"camera",handler:()=>(0,s.mG)(this,void 0,void 0,function*(){const e=yield d.V1.getPhoto({quality:90,allowEditing:!1,resultType:d.dk.Base64,source:d.oK.Camera});console.log(e),this.b64imx=e})}]})).present()})}editPostAddPhoto(n){return(0,s.mG)(this,void 0,void 0,function*(){if(this.b64imx){const e=yield this.loadingController.create();yield e.present();const l=yield this.dataservice.uploadPhotoWId(this.b64imx,n);e.dismiss(),l||(yield(yield this.alertController.create({header:"Acci\xf3n fallida",message:"Hubo un problema al subir tu foto",buttons:["OK"]})).present())}this.router.navigateByUrl("/app/home",{replaceUrl:!0})})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(f.D),t.Y36(u.F0),t.Y36(a.HT),t.Y36(b.gx),t.Y36(y.e),t.Y36(a.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-publicity-post"]],decls:25,vars:2,consts:[["id","container"],[1,"header"],["id","logo"],["src","/assets/images/Logo.png"],["ngNativeValidate","",3,"ngSubmit"],[1,"formulario"],[1,"campo"],["type","text","id","title","name","title","required","",3,"ngModel","ngModelChange"],["name","text","rows","10","cols","30","required","",1,"textarea",3,"ngModel","ngModelChange"],["id","btnEligeFoto","color","warning","fill","solid","shape","round","expand","full","type","submit",1,"ion-float-right",3,"click"],["name","images-outline"],["id","botonRegistro","type","submit"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),t._UZ(3,"ion-back-button"),t.TgZ(4,"ion-title"),t._uU(5,"Crear Publicidad"),t.qZA()(),t.TgZ(6,"div",2),t._UZ(7,"ion-img",3),t.qZA(),t.TgZ(8,"form",4),t.NdJ("ngSubmit",function(){return e.addPost()}),t.TgZ(9,"div",5)(10,"div",6)(11,"label"),t._uU(12,"T\xcdTULO"),t.qZA(),t.TgZ(13,"input",7),t.NdJ("ngModelChange",function(g){return e.title=g}),t.qZA()(),t.TgZ(14,"div",6)(15,"label"),t._uU(16,"CONTENIDO"),t.qZA(),t.TgZ(17,"textarea",8),t.NdJ("ngModelChange",function(g){return e.text=g}),t.qZA()(),t.TgZ(18,"form")(19,"div",6)(20,"ion-button",9),t.NdJ("click",function(){return e.choosePhoto()}),t._UZ(21,"ion-icon",10),t._uU(22,"Elegir foto"),t.qZA()()(),t.TgZ(23,"button",11),t._uU(24,"PUBLICAR"),t.qZA()()()()()),2&n&&(t.xp6(13),t.Q6J("ngModel",e.title),t.xp6(4),t.Q6J("ngModel",e.text))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.On,r.F,a.oU,a.YG,a.W2,a.gu,a.Xz,a.wd,a.cs],styles:['#container[_ngcontent-%COMP%]{text-align:center;position:relative;height:100vh}#container[_ngcontent-%COMP%]:before{content:"";background:url(/assets/images/fondoInicio.jpg);height:100%;background-position:center;background-repeat:no-repeat;background-size:cover;opacity:.3;position:absolute;inset:0;z-index:-1}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#logo[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;width:60%}.formulario[_ngcontent-%COMP%]{display:block;position:relative}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;margin:5px;color:#ea7622;font-weight:700;font-size:15px}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;border:none;font-size:15px;border-bottom:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}.formulario[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{color:#ea7622;float:left;margin-left:8em}.formulario[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]::placeholder{color:#ea7622;font-weight:700;font-size:15px}#botonRegistro[_ngcontent-%COMP%]{margin:15px;width:80%;border-radius:20px;font-size:25x;color:#000;background-color:#fff;border:1px solid #EA7622;font-weight:bolder;padding-top:7px;padding-bottom:7px}#btnEligeFoto[_ngcontent-%COMP%]{margin-right:8em}.formulario[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin:35px 5px 10px;width:80%;font-size:15px;border:2px solid #EA7622;padding-bottom:5px;background-color:#00000003}ion-back-button[_ngcontent-%COMP%]{display:inline-block;width:10%}ion-title[_ngcontent-%COMP%]{text-align:start;display:inline-block;width:80%}']}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(x),u.Bz]}),o})(),v=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.ez,r.u5,a.Pc,M]}),o})()}}]);