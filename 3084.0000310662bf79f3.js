"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3084],{7556:(D,C,c)=>{c.d(C,{e:()=>g});var d=c(655),i=c(7323),s=c(8304),f=c(7311),m=c(2731),v=c(5070),t=c(3562),O=c(2096);let g=(()=>{class p{constructor(e,n){this.auth=e,this.firestore=n}register({email:e,password:n}){return(0,d.mG)(this,void 0,void 0,function*(){try{return yield(0,v.Xb)(this.auth,e,n)}catch(l){return null}})}googleregister(){return(0,d.mG)(this,void 0,void 0,function*(){try{const e=(0,i.v0)(),n=new s.hJ;yield(0,s.F6)(e,n)}catch(e){return null}})}facebookregister(){return(0,d.mG)(this,void 0,void 0,function*(){try{const e=(0,i.v0)(),n=new s._O;yield(0,s.F6)(e,n)}catch(e){return null}})}hasSetup(){return(0,d.mG)(this,void 0,void 0,function*(){const n=(0,i.v0)().currentUser.uid,l=(0,m.hJ)(this.firestore,"users");return(0,m.IO)((0,m.hJ)(l,"users"),(0,m.ar)("user","==",n))?(console.log("false"),()=>(0,f.Y_)(["/app/home"])):()=>(0,f.Y_)(["/user-type"])})}login({email:e,password:n}){return(0,d.mG)(this,void 0,void 0,function*(){try{return yield(0,i.e5)(this.auth,e,n)}catch(l){return console.log("error Login: "+l),l}})}googleLogin(){return(0,d.mG)(this,void 0,void 0,function*(){try{const e=(0,i.v0)(),n=new s.hJ;yield(0,s.F6)(e,n)}catch(e){return null}})}facebookLogin(){return(0,d.mG)(this,void 0,void 0,function*(){try{const e=(0,i.v0)(),n=new s._O;yield(0,s.F6)(e,n)}catch(e){return null}})}logout(){return(0,v.w7)(this.auth)}getUserType(e){return(0,d.mG)(this,void 0,void 0,function*(){const n=(0,t.JU)(this.firestore,`users/${e}`);let l=null;(0,t.QT)(n).then(P=>(console.log(P.data(),P.id),l=P.data(),l.type))})}}return p.\u0275fac=function(e){return new(e||p)(O.LFG(i.gx),O.LFG(t.gg))},p.\u0275prov=O.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},5083:(D,C,c)=>{c.d(C,{o:()=>v});var d=c(655),i=c(3562),s=c(6180),f=c(2096),m=c(7323);let v=(()=>{class t{constructor(g,p,o){this.auth=g,this.firestore=p,this.storage=o}getUserProfile(){const p=(0,i.JU)(this.firestore,`users/${this.auth.currentUser.uid}`);return(0,i._1)(p)}getUserProfileWId(g){const o=(0,i.JU)(this.firestore,`users/${g}`);return(0,i._1)(o)}uploadPhoto(g,p){return(0,d.mG)(this,void 0,void 0,function*(){const o=yield this.auth.currentUser,n=(0,s.iH)(this.storage,`uploads/${o.uid}/profile.png`);try{yield(0,s.sf)(n,g.base64String,"base64");const l=yield(0,s.Jt)(n),P=(0,i.JU)(this.firestore,`users/${o.uid}`);return yield(0,i.r7)(P,{imageURL:l}),!0}catch(l){return console.log(l),null}})}}return t.\u0275fac=function(g){return new(g||t)(f.LFG(m.gx),f.LFG(i.gg),f.LFG(s.Ke))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2468:(D,C,c)=>{c.d(C,{D:()=>O});var d=c(655),i=c(3562),s=c(6180),f=c(6961),m=c(5525),v=c(2096),t=c(7323);let O=(()=>{class g{constructor(o,e,n){this.firestore=o,this.auth=e,this.storage=n}getPosts(){const o=(0,i.hJ)(this.firestore,"posts");return(0,i.BS)(o,{idField:"id"})}getUsers(){const o=(0,i.hJ)(this.firestore,"posts");return(0,i.BS)(o,{idField:"id"})}getProfiles(){const o=(0,i.hJ)(this.firestore,"users");return(0,i.BS)(o,{idField:"user"})}getPostById(o){let e;const n=(0,i.JU)(this.firestore,`posts/${o}`);let l=(0,i._1)(n,{idField:"id"});return e.author=l.author,e.id=l.id,e.images=l.images,e.pos=l.pos,e.positive=l.positive,e.text=l.text,e.title=l.title,e}addPost(o){const e=(0,i.hJ)(this.firestore,"posts");return(0,i.ET)(e,o)}addPostGetId(o){const e=(0,i.hJ)(this.firestore,"posts");return(0,i.ET)(e,o).then(l=>(console.log(l.id),l.id))}deletePost(o){const e=(0,i.JU)(this.firestore,`posts/${o.id}`);return(0,i.oe)(e)}deleteImage(o){for(let n=0;n<o.images.length;n++)console.log(o.images[n])}updatePost(o){const e=(0,i.JU)(this.firestore,`posts/${o.id}`);return(0,i.r7)(e,{title:o.title,text:o.text,positive:o.positive})}uploadPhoto(o){return(0,d.mG)(this,void 0,void 0,function*(){let e;const x=(0,s.iH)(this.storage,`uploads/${this.auth.currentUser.uid}/photo.png`);try{yield(0,f.sf)(x,o.base64String,"base64"),e=[yield(0,f.Jt)(x)];const y=(0,i.JU)(this.firestore,"posts/bvSZeSKsuk6Ea95M6ytv");return yield(0,m.pl)(y,{images:e}),!0}catch(M){return console.log(M),null}})}uploadPhotoWId(o,e){return(0,d.mG)(this,void 0,void 0,function*(){let n;const P=e,M=(0,s.iH)(this.storage,`uploads/${this.auth.currentUser.uid}/${P}/photo.png`);try{yield(0,f.sf)(M,o.base64String,"base64"),n=[yield(0,f.Jt)(M)];const T=(0,i.JU)(this.firestore,`posts/${P}`);return yield(0,i.r7)(T,{images:n}),!0}catch(y){return console.log(y),null}})}getImagesArray(o){return(0,d.mG)(this,void 0,void 0,function*(){let e;const x=(0,s.iH)(this.storage,`uploads/${this.auth.currentUser.uid}/photo.png`);try{return yield(0,f.sf)(x,o.base64String,"base64"),e=[yield(0,f.Jt)(x)],e}catch(M){return console.log(M),null}})}getDoc(o){return(0,d.mG)(this,void 0,void 0,function*(){const e=(0,i.JU)(this.firestore,`posts/${o}`);let n=null;(0,i.QT)(e).then(l=>(console.log(l.data(),l.id),n=l.data(),n))})}}return g.\u0275fac=function(o){return new(o||g)(v.LFG(i.gg),v.LFG(t.gx),v.LFG(s.Ke))},g.\u0275prov=v.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},3084:(D,C,c)=>{c.r(C),c.d(C,{ViewProfilePageModule:()=>w});var d=c(9808),i=c(4182),s=c(7590),f=c(7733),m=c(655),v=c(7323),t=c(2096),O=c(7556),g=c(2468),p=c(5083);function o(r,_){if(1&r&&t._UZ(0,"ion-img",12),2&r){const a=t.oxw();t.Q6J("src",a.profile.imageURL)}}function e(r,_){1&r&&(t.TgZ(0,"div",13),t._UZ(1,"img",14)(2,"p",15),t.qZA())}function n(r,_){if(1&r&&t._UZ(0,"ion-img",12),2&r){const a=t.oxw(3);t.Q6J("src",a.profilePicture)}}function l(r,_){1&r&&(t.TgZ(0,"div",13),t._UZ(1,"img",14)(2,"p",15),t.qZA())}function P(r,_){1&r&&t.GkF(0)}function x(r,_){if(1&r&&(t.ynx(0),t.TgZ(1,"ion-slide"),t._UZ(2,"img",12),t.qZA(),t.BQk()),2&r){const a=_.$implicit;t.xp6(2),t.s9C("src",a,t.LSH)}}function M(r,_){if(1&r){const a=t.EpF();t.TgZ(0,"div")(1,"ion-card-header")(2,"div",17)(3,"div",18),t.NdJ("click",function(){t.CHM(a);const h=t.oxw().$implicit,E=t.oxw();return t.KtG(E.seePost(h.id))}),t.TgZ(4,"div",19)(5,"ion-avatar",20),t.YNc(6,n,1,1,"ion-img",5),t.YNc(7,l,3,0,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(9,"ion-card-title"),t._uU(10),t.qZA(),t.TgZ(11,"ion-card-subtitle"),t._uU(12),t.YNc(13,P,1,0,"ng-container",16),t.qZA()()()()(),t.TgZ(14,"ion-card-content",21),t.NdJ("click",function(){t.CHM(a);const h=t.oxw().$implicit,E=t.oxw();return t.KtG(E.seePost(h.id))}),t.TgZ(15,"ion-col",22)(16,"ion-slides",23),t.YNc(17,x,3,1,"ng-container",11),t.qZA()(),t.TgZ(18,"div",24)(19,"p",25),t._uU(20),t.qZA(),t.TgZ(21,"p",26),t._uU(22),t.qZA()()()()}if(2&r){const a=t.MAs(8),u=t.oxw().$implicit,h=t.oxw();t.xp6(6),t.Q6J("ngIf",h.hasimage(u))("ngIfElse",a),t.xp6(4),t.Oqu(h.user(u)),t.xp6(2),t.hij("",h.type(u)," "),t.xp6(1),t.Q6J("ngIf",0==u.positive),t.xp6(4),t.Q6J("ngForOf",u.images),t.xp6(3),t.Oqu(u.title),t.xp6(2),t.hij("",h.postText(u.text)," ")}}function y(r,_){if(1&r&&(t.TgZ(0,"ion-card"),t.YNc(1,M,23,8,"div",16),t.qZA()),2&r){const a=_.$implicit,u=t.oxw();t.xp6(1),t.Q6J("ngIf",a.author==u.ownPosts)}}const b=[{path:"",component:(()=>{class r{constructor(a,u,h,E,I){this.auth=a,this.router=u,this.dataService=h,this.route=E,this.avatarService=I,this.profile=null,this.userLogged=null,this.posts=[],this.ownPosts=null,this.profiles=[],this.profilePicture=null,this.username=null,this.profileuser="",this.route.queryParams.subscribe(L=>(0,m.mG)(this,void 0,void 0,function*(){this.dataService.getProfiles().subscribe(R=>{this.profiles=R});const Z=(0,v.v0)();(0,v.Aj)(Z,R=>{R&&(this.avatarService.getUserProfileWId(L.id).subscribe(U=>{this.profile=U,this.ownPosts=U.client.user,this.profileuser=U.client.username}),this.dataService.getPosts().subscribe(U=>{this.posts=U}))})}))}ngOnInit(){}postText(a){return null==a?a:a.length>250?(a=a.substring(0,200))+" ...":a}user(a){for(let u=0;u<this.profiles.length;u++)if(a.author==this.profiles[u].client.user)return this.username=this.profiles[u].client.username,this.username;return"Prueba"}hasimage(a){for(let u=0;u<this.profiles.length;u++)if(a.author==this.profiles[u].client.user)return this.profilePicture=this.profiles[u].imageURL,!0;return!1}type(a){let u="";for(let h=0;h<this.profiles.length;h++)if(a.author==this.profiles[h].client.user)return u=this.profiles[h].client.type,u;return"tipo"}seePost(a){this.router.navigate(["/view-post"],{queryParams:{id:a}})}}return r.\u0275fac=function(a){return new(a||r)(t.Y36(O.e),t.Y36(f.F0),t.Y36(g.D),t.Y36(f.gz),t.Y36(p.o))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-profile"]],decls:24,vars:5,consts:[[3,"translucent"],["id","headerLogo","src","/assets/images/logoHeader.png","size","xs"],["id","headerTitle","align-self-end",""],[1,"profile"],[1,"preview"],[3,"src",4,"ngIf","ngIfElse"],["placeholder_avatar",""],["id","username"],["id","divdiv"],[1,"divider"],[1,"publics"],[4,"ngFor","ngForOf"],[3,"src"],[1,"fallback"],["src","https://t3.ftcdn.net/jpg/03/72/38/88/360_F_372388834_bUf3QEyES2fkPj0D7g0ZBMng2DuSgld7.jpg",1,"profileIcon"],[1,"profileIcontext"],[4,"ngIf"],[1,"row"],[1,"column",3,"click"],[1,"profile2"],[1,"ion-avatar"],[3,"click"],[1,"imgs"],["pager","true","loop","true"],[1,"text"],[1,"title"],[1,"subtitle"]],template:function(a,u){if(1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row")(3,"ion-buttons")(4,"ion-back-button"),t._uU(5,"Volver atr\xe1s"),t.qZA()(),t._UZ(6,"ion-img",1),t.TgZ(7,"ion-label",2),t._uU(8,"GeoLocal"),t.qZA()()()(),t.TgZ(9,"ion-content")(10,"div",3)(11,"div",4)(12,"ion-avatar"),t.YNc(13,o,1,1,"ion-img",5),t.YNc(14,e,3,0,"ng-template",null,6,t.W1O),t.qZA()(),t.TgZ(16,"div",7)(17,"p"),t._uU(18),t.qZA()(),t.TgZ(19,"div",8),t._UZ(20,"ion-item-divider",9),t.qZA()(),t.TgZ(21,"div",10)(22,"ion-col"),t.YNc(23,y,2,1,"ion-card",11),t.qZA()()()),2&a){const h=t.MAs(15);t.Q6J("translucent",!0),t.xp6(13),t.Q6J("ngIf",null==u.profile?null:u.profile.imageURL)("ngIfElse",h),t.xp6(5),t.Oqu(u.profileuser),t.xp6(5),t.Q6J("ngForOf",u.posts)}},dependencies:[d.sg,d.O5,s.BJ,s.oU,s.Sm,s.PM,s.FN,s.Zi,s.tO,s.Dq,s.wI,s.W2,s.Gu,s.Xz,s.rH,s.Q$,s.Nd,s.A$,s.Hr,s.sr,s.cs],styles:['#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#headerTitle[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#ea7622;vertical-align:text-bottom;margin-left:1em;margin-top:1em}#headerLogo[_ngcontent-%COMP%]{height:3em;width:5em}ion-avatar[_ngcontent-%COMP%]{width:128px;height:128px}ion-avatar[_ngcontent-%COMP%]:hover{opacity:.5;font-size:100px;color:#05b736}.preview[_ngcontent-%COMP%]{padding-top:30px;display:flex;justify-content:center}.fallback[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%;background:#bfbfbf;font-size:0;display:flex;justify-content:center;align-items:center;font-weight:500}.fallback[_ngcontent-%COMP%]:hover{opacity:.5;font-size:100px;color:#05b736}.profileIcontext[_ngcontent-%COMP%]{position:absolute}#username[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-weight:700}#username[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 10px 10px}#divdiv[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:5px;text-align:center}.divider[_ngcontent-%COMP%]{width:90%}.column[_ngcontent-%COMP%]{float:left;width:50%}.dropbtn[_ngcontent-%COMP%]{padding:10px;font-size:16px;border:none}.dropdown[_ngcontent-%COMP%]{float:right;width:50%;display:flex;justify-content:flex-end}.row[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}.dropdown-content[_ngcontent-%COMP%]{margin-top:40px;display:none;position:absolute;background-color:#f1f1f1;min-width:160px;box-shadow:0 8px 16px #0003;z-index:7}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ea7622;color:#fff}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%]{background-color:#bebebe}.ion-avatar[_ngcontent-%COMP%]{width:35px;height:35px}.profile2[_ngcontent-%COMP%]{display:flex}.profile2[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{position:absolute;margin-left:43px;font-size:15px;font-weight:600}.profile2[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{position:absolute;margin-left:43px;font-size:12px;padding-top:20px}ion-card-header[_ngcontent-%COMP%]{padding-bottom:10px}ion-card-content[_ngcontent-%COMP%]{padding:0;margin:0;height:auto}ion-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.text[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px;padding:5px}.title[_ngcontent-%COMP%]{font-weight:700}.imgs[_ngcontent-%COMP%]{padding:0;margin:0}']}),r})()}];let A=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.Bz.forChild(b),f.Bz]}),r})(),w=(()=>{class r{}return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[d.ez,i.u5,s.Pc,A]}),r})()}}]);